<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ì¸ìŠ¤íƒ€ê·¸ë¨ í”¼ë“œ ìë™ ì‘ì„±ê¸°</title>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Google Fonts: Inter -->
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
    rel="stylesheet"
  />

  <!-- React & ReactDOM -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

  <!-- Babel for JSX -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <style>
    body {
      font-family: 'Inter', sans-serif;
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const App = () => {
      const [inputText, setInputText] = React.useState('');
      const [selectedTone, setSelectedTone] = React.useState('ì¹œê·¼í•˜ê³  ìºì£¼ì–¼í•œ ì–´íˆ¬');
      const [selectedStructure, setSelectedStructure] = React.useState('ì„œë¡ -ë³¸ë¡ -ê²°ë¡ ');
      const [generatedPost, setGeneratedPost] = React.useState('');
      const [isLoading, setIsLoading] = React.useState(false);
      const [error, setError] = React.useState('');
      const [googleApiKey, setGoogleApiKey] = React.useState('');

      const toneOptions = [
        'ì¹œê·¼í•˜ê³  ìºì£¼ì–¼í•œ ì–´íˆ¬',
        'ì „ë¬¸ì ì´ê³  ì •ë³´ ì „ë‹¬ ìœ„ì£¼',
        'ê°ì„±ì ì´ê³  ì„œì •ì ì¸ ì–´íˆ¬',
        'ì¬ë¯¸ìˆê³  ìœ ë¨¸ëŸ¬ìŠ¤í•œ ì–´íˆ¬',
        'ê°„ê²°í•˜ê³  ëª…ë£Œí•œ ì–´íˆ¬'
      ];

      const structureOptions = [
        'ì„œë¡ -ë³¸ë¡ -ê²°ë¡ ',
        'í•µì‹¬ ìš”ì•½ í›„ ìƒì„¸ ì„¤ëª…',
        'ì§ˆë¬¸-ë‹µë³€ í˜•ì‹',
        'ëª©ë¡(ë¦¬ìŠ¤íŠ¸) í˜•ì‹',
        'ììœ  í˜•ì‹'
      ];

      const generatePost = async () => {
        setIsLoading(true);
        setError('');
        setGeneratedPost('');

        if (!googleApiKey.trim()) {
          setError('Google API Keyë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
          setIsLoading(false);
          return;
        }

        const prompt = `
ë‹¹ì‹ ì€ ì¸ìŠ¤íƒ€ê·¸ë¨ í”¼ë“œ ê²Œì‹œë¬¼ ì‘ì„± ì „ë¬¸ AIì…ë‹ˆë‹¤. ë‹¤ìŒ ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ ì¸ìŠ¤íƒ€ê·¸ë¨ í”¼ë“œ ê²Œì‹œë¬¼ì„ ì‘ì„±í•´ì£¼ì„¸ìš”.
ì‚¬ìš©ìì˜ í•„ê¸°:
"${inputText}"

ë‹¤ìŒ ì¡°ê±´ì— ë§ì¶° ê¸€ì„ ê°€ê³µí•´ì£¼ì„¸ìš”:
- ì–´íˆ¬: ${selectedTone}
- êµ¬ì¡°: ${selectedStructure}

ê²°ê³¼ë¬¼ì€ ì¸ìŠ¤íƒ€ê·¸ë¨ í”¼ë“œì— ë°”ë¡œ ê²Œì‹œí•  ìˆ˜ ìˆë„ë¡ ìì—°ìŠ¤ëŸ½ê³  ë§¤ë ¥ì ì¸ í•œêµ­ì–´ ë¬¸ì²´ë¡œ ì‘ì„±í•´ì£¼ì„¸ìš”. ë¶ˆí•„ìš”í•œ ì„œë¡ /ê²°ë¡  ë¬¸êµ¬ ì—†ì´ ì¸ìŠ¤íƒ€ê·¸ë¨ ë³¸ë¬¸ë§Œ ì‘ì„±í•´ ì£¼ì„¸ìš”.
`;

        try {
          const apiKey = googleApiKey.trim();
          const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

          const chatHistory = [{ role: 'user', parts: [{ text: prompt }] }];
          const response = await fetch(apiUrl, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ contents: chatHistory })
          });
          const result = await response.json();

          if (
            result.candidates?.length &&
            result.candidates[0].content?.parts?.length
          ) {
            setGeneratedPost(result.candidates[0].content.parts[0].text);
          } else {
            console.error('Unexpected API response:', result);
            setError('ê²Œì‹œë¬¼ ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. API ì‘ë‹µì„ í™•ì¸í•´ì£¼ì„¸ìš”.');
          }
        } catch (err) {
          console.error('Error:', err);
          setError('API í˜¸ì¶œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
        } finally {
          setIsLoading(false);
        }
      };

      const copyToClipboard = () => {
        if (!generatedPost) return;
        const ta = document.createElement('textarea');
        ta.value = generatedPost;
        document.body.appendChild(ta);
        ta.select();
        document.execCommand('copy');
        document.body.removeChild(ta);
        alert('í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
      };

      return (
        <div className="min-h-screen bg-gray-100 flex items-center justify-center p-4">
          <div className="bg-white p-6 rounded-2xl shadow-xl w-full max-w-3xl">
            <h1 className="text-3xl font-bold text-center mb-6">
              âœ¨ ì¸ìŠ¤íƒ€ê·¸ë¨ í”¼ë“œ ìë™ ì‘ì„±ê¸° âœ¨
            </h1>

            <div className="mb-6">
              <label className="block mb-2 font-medium">
                ğŸ”‘ Google API Key
              </label>
              <input
                type="password"
                className="w-full p-3 border rounded-lg"
                placeholder="API Key ì…ë ¥"
                value={googleApiKey}
                onChange={(e) => setGoogleApiKey(e.target.value)}
              />
            </div>

            <div className="mb-6">
              <label className="block mb-2 font-medium">âœï¸ í•„ê¸° ì…ë ¥</label>
              <textarea
                className="w-full p-3 border rounded-lg min-h-[120px]"
                placeholder="ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”"
                value={inputText}
                onChange={(e) => setInputText(e.target.value)}
              />
            </div>

            <div className="grid grid-cols-2 gap-4 mb-6">
              <div>
                <label className="block mb-2 font-medium">ğŸ—£ï¸ ì–´íˆ¬ ì„ íƒ</label>
                <select
                  className="w-full p-3 border rounded-lg"
                  value={selectedTone}
                  onChange={(e) => setSelectedTone(e.target.value)}
                >
                  {toneOptions.map((t) => (
                    <option key={t}>{t}</option>
                  ))}
                </select>
              </div>

              <div>
                <label className="block mb-2 font-medium">ğŸ“ êµ¬ì¡° ì„ íƒ</label>
                <select
                  className="w-full p-3 border rounded-lg"
                  value={selectedStructure}
                  onChange={(e) => setSelectedStructure(e.target.value)}
                >
                  {structureOptions.map((s) => (
                    <option key={s}>{s}</option>
                  ))}
                </select>
              </div>
            </div>

            <button
              onClick={generatePost}
              disabled={!inputText.trim() || !googleApiKey.trim() || isLoading}
              className={`w-full py-3 rounded-xl font-semibold text-white transition ${
                isLoading
                  ? 'bg-blue-300 cursor-not-allowed'
                  : 'bg-blue-600 hover:bg-blue-700'
              }`}
            >
              {isLoading ? 'ìƒì„± ì¤‘...' : 'ğŸš€ ê²Œì‹œë¬¼ ìƒì„±í•˜ê¸°'}
            </button>

            {error && (
              <p className="mt-4 text-red-600 text-center">{error}</p>
            )}

            {generatedPost && (
              <div className="mt-8">
                <p className="mb-4 font-medium">ğŸ‰ ì™„ì„±ëœ ê²Œì‹œë¬¼</p>
                <div className="p-4 bg-blue-50 rounded-lg whitespace-pre-wrap">
                  {generatedPost}
                </div>
                <button
                  onClick={copyToClipboard}
                  className="mt-4 w-full py-2 rounded-lg bg-green-500 text-white hover:bg-green-600"
                >
                  ğŸ“‹ ë³µì‚¬í•˜ê¸°
                </button>
              </div>
            )}
          </div>
        </div>
      );
    };

    ReactDOM.createRoot(document.getElementById('root')).render(<App />);
  </script>
</body>
</html>
